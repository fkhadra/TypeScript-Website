{"componentChunkName":"component---src-templates-documentation-tsx","path":"/docs/handbook/release-notes/typescript-2-9.html","result":{"data":{"markdownRemark":{"id":"49b5d1f7-f235-5a45-8a27-3451c539fc88","excerpt":"Support number and symbol named properties with keyof and mapped types TypeScript 2.9 adds support for number and symbol named properties in index types and…","html":"<h2 id=\"support-number-and-symbol-named-properties-with-keyof-and-mapped-types\" style=\"position:relative;\"><a href=\"#support-number-and-symbol-named-properties-with-keyof-and-mapped-types\" aria-label=\"support number and symbol named properties with keyof and mapped types permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Support <code>number</code> and <code>symbol</code> named properties with <code>keyof</code> and mapped types</h2>\n<p>TypeScript 2.9 adds support for <code>number</code> and <code>symbol</code> named properties in index types and mapped types.\nPreviously, the <code>keyof</code> operator and mapped types only supported <code>string</code> named properties.</p>\n<p>Changes include:</p>\n<ul>\n<li>An index type <code>keyof T</code> for some type <code>T</code> is a subtype of <code>string | number | symbol</code>.</li>\n<li>A mapped type <code>{ [P in K]: XXX }</code> permits any <code>K</code> assignable to <code>string | number | symbol</code>.</li>\n<li>In a <code>for...in</code> statement for an object of a generic type <code>T</code>, the inferred type of the iteration variable was previously <code>keyof T</code> but is now <code>Extract&#x3C;keyof T, string></code>. (In other words, the subset of <code>keyof T</code> that includes only string-like values.)</li>\n</ul>\n<p>Given an object type <code>X</code>, <code>keyof X</code> is resolved as follows:</p>\n<ul>\n<li>If <code>X</code> contains a string index signature, <code>keyof X</code> is a union of <code>string</code>, <code>number</code>, and the literal types representing symbol-like properties, otherwise</li>\n<li>If <code>X</code> contains a numeric index signature, <code>keyof X</code> is a union of <code>number</code> and the literal types representing string-like and symbol-like properties, otherwise</li>\n<li><code>keyof X</code> is a union of the literal types representing string-like, number-like, and symbol-like properties.</li>\n</ul>\n<p>Where:</p>\n<ul>\n<li>String-like properties of an object type are those declared using an identifier, a string literal, or a computed property name of a string literal type.</li>\n<li>Number-like properties of an object type are those declared using a numeric literal or computed property name of a numeric literal type.</li>\n<li>Symbol-like properties of an object type are those declared using a computed property name of a unique symbol type.</li>\n</ul>\n<p>In a mapped type <code>{ [P in K]: XXX }</code>, each string literal type in <code>K</code> introduces a property with a string name, each numeric literal type in <code>K</code> introduces a property with a numeric name, and each unique symbol type in <code>K</code> introduces a property with a unique symbol name.\nFurthermore, if <code>K</code> includes type <code>string</code>, a string index signature is introduced, and if <code>K</code> includes type <code>number</code>, a numeric index signature is introduced.</p>\n<h5 id=\"example\" style=\"position:relative;\"><a href=\"#example\" aria-label=\"example permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Example</h5>\n<pre><code class=\"language-ts\">const c = \"c\";\nconst d = 10;\nconst e = Symbol();\n\nconst enum E1 {\n  A,\n  B,\n  C,\n}\nconst enum E2 {\n  A = \"A\",\n  B = \"B\",\n  C = \"C\",\n}\n\ntype Foo = {\n  a: string; // String-like name\n  5: string; // Number-like name\n  [c]: string; // String-like name\n  [d]: string; // Number-like name\n  [e]: string; // Symbol-like name\n  [E1.A]: string; // Number-like name\n  [E2.A]: string; // String-like name\n};\n\ntype K1 = keyof Foo; // \"a\" | 5 | \"c\" | 10 | typeof e | E1.A | E2.A\ntype K2 = Extract&#x3C;keyof Foo, string>; // \"a\" | \"c\" | E2.A\ntype K3 = Extract&#x3C;keyof Foo, number>; // 5 | 10 | E1.A\ntype K4 = Extract&#x3C;keyof Foo, symbol>; // typeof e\n</code></pre>\n<p>Since <code>keyof</code> now reflects the presence of a numeric index signature by including type <code>number</code> in the key type, mapped types such as <code>Partial&#x3C;T></code> and <code>Readonly&#x3C;T></code> work correctly when applied to object types with numeric index signatures:</p>\n<pre><code class=\"language-ts\">type Arrayish&#x3C;T> = {\n  length: number;\n  [x: number]: T;\n};\n\ntype ReadonlyArrayish&#x3C;T> = Readonly&#x3C;Arrayish&#x3C;T>>;\n\ndeclare const map: ReadonlyArrayish&#x3C;string>;\nlet n = map.length;\nlet x = map[123]; // Previously of type any (or an error with --noImplicitAny)\n</code></pre>\n<p>Furthermore, with the <code>keyof</code> operator’s support for <code>number</code> and <code>symbol</code> named keys, it is now possible to abstract over access to properties of objects that are indexed by numeric literals (such as numeric enum types) and unique symbols.</p>\n<pre><code class=\"language-ts\">const enum Enum {\n  A,\n  B,\n  C,\n}\n\nconst enumToStringMap = {\n  [Enum.A]: \"Name A\",\n  [Enum.B]: \"Name B\",\n  [Enum.C]: \"Name C\",\n};\n\nconst sym1 = Symbol();\nconst sym2 = Symbol();\nconst sym3 = Symbol();\n\nconst symbolToNumberMap = {\n  [sym1]: 1,\n  [sym2]: 2,\n  [sym3]: 3,\n};\n\ntype KE = keyof typeof enumToStringMap; // Enum (i.e. Enum.A | Enum.B | Enum.C)\ntype KS = keyof typeof symbolToNumberMap; // typeof sym1 | typeof sym2 | typeof sym3\n\nfunction getValue&#x3C;T, K extends keyof T>(obj: T, key: K): T[K] {\n  return obj[key];\n}\n\nlet x1 = getValue(enumToStringMap, Enum.C); // Returns \"Name C\"\nlet x2 = getValue(symbolToNumberMap, sym3); // Returns 3\n</code></pre>\n<p>This is a breaking change; previously, the <code>keyof</code> operator and mapped types only supported <code>string</code> named properties.\nCode that assumed values typed with <code>keyof T</code> were always <code>string</code>s, will now be flagged as error.</p>\n<h5 id=\"example-1\" style=\"position:relative;\"><a href=\"#example-1\" aria-label=\"example 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Example</h5>\n<pre><code class=\"language-ts\">function useKey&#x3C;T, K extends keyof T>(o: T, k: K) {\n  var name: string = k; // Error: keyof T is not assignable to string\n}\n</code></pre>\n<h4 id=\"recommendations\" style=\"position:relative;\"><a href=\"#recommendations\" aria-label=\"recommendations permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Recommendations</h4>\n<ul>\n<li>\n<p>If your functions are only able to handle string named property keys, use <code>Extract&#x3C;keyof T, string></code> in the declaration:</p>\n<pre><code class=\"language-ts\">function useKey&#x3C;T, K extends Extract&#x3C;keyof T, string>>(o: T, k: K) {\nvar name: string = k; // OK\n}\n</code></pre>\n</li>\n<li>\n<p>If your functions are open to handling all property keys, then the changes should be done down-stream:</p>\n<pre><code class=\"language-ts\">function useKey&#x3C;T, K extends keyof T>(o: T, k: K) {\nvar name: string | number | symbol = k;\n}\n</code></pre>\n</li>\n<li>Otherwise use <code>--keyofStringsOnly</code> compiler option to disable the new behavior.</li>\n</ul>\n<h2 id=\"generic-type-arguments-in-jsx-elements\" style=\"position:relative;\"><a href=\"#generic-type-arguments-in-jsx-elements\" aria-label=\"generic type arguments in jsx elements permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Generic type arguments in JSX elements</h2>\n<p>JSX elements now allow passing type arguments to generic components.</p>\n<h5 id=\"example-2\" style=\"position:relative;\"><a href=\"#example-2\" aria-label=\"example 2 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Example</h5>\n<pre><code class=\"language-ts\">class GenericComponent&#x3C;P> extends React.Component&#x3C;P> {\n  internalProp: P;\n}\n\ntype Props = { a: number; b: string };\n\nconst x = &#x3C;GenericComponent&#x3C;Props> a={10} b=\"hi\" />; // OK\n\nconst y = &#x3C;GenericComponent&#x3C;Props> a={10} b={20} />; // Error\n</code></pre>\n<h2 id=\"generic-type-arguments-in-generic-tagged-templates\" style=\"position:relative;\"><a href=\"#generic-type-arguments-in-generic-tagged-templates\" aria-label=\"generic type arguments in generic tagged templates permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Generic type arguments in generic tagged templates</h2>\n<p>Tagged templates are a form of invocation introduced in ECMAScript 2015.\nLike call expressions, generic functions may be used in a tagged template and TypeScript will infer the type arguments utilized.</p>\n<p>TypeScript 2.9 allows passing generic type arguments to tagged template strings.</p>\n<h5 id=\"example-3\" style=\"position:relative;\"><a href=\"#example-3\" aria-label=\"example 3 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Example</h5>\n<pre><code class=\"language-ts\">declare function styledComponent&#x3C;Props>(\n  strs: TemplateStringsArray\n): Component&#x3C;Props>;\n\ninterface MyProps {\n  name: string;\n  age: number;\n}\n\nstyledComponent&#x3C;MyProps>`\n  font-size: 1.5em;\n  text-align: center;\n  color: palevioletred;\n`;\n\ndeclare function tag&#x3C;T>(strs: TemplateStringsArray, ...args: T[]): T;\n\n// inference fails because 'number' and 'string' are both candidates that conflict\nlet a = tag&#x3C;string | number>`${100} ${\"hello\"}`;\n</code></pre>\n<h2 id=\"import-types\" style=\"position:relative;\"><a href=\"#import-types\" aria-label=\"import types permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code>import</code> types</h2>\n<p>Modules can import types declared in other modules. But non-module global scripts cannot access types declared in modules. Enter <code>import</code> types.</p>\n<p>Using <code>import(\"mod\")</code> in a type annotation allows for reaching in a module and accessing its exported declaration without importing it.</p>\n<h5 id=\"example-4\" style=\"position:relative;\"><a href=\"#example-4\" aria-label=\"example 4 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Example</h5>\n<p>Given a declaration of a class <code>Pet</code> in a module file:</p>\n<pre><code class=\"language-ts\">// module.d.ts\n\nexport declare class Pet {\n  name: string;\n}\n</code></pre>\n<p>Can be used in a non-module file <code>global-script.ts</code>:</p>\n<pre><code class=\"language-ts\">// global-script.ts\n\nfunction adopt(p: import(\"./module\").Pet) {\n  console.log(`Adopting ${p.name}...`);\n}\n</code></pre>\n<p>This also works in JSDoc comments to refer to types from other modules in <code>.js</code>:</p>\n<pre><code class=\"language-js\">// a.js\n\n/**\n * @param p { import(\"./module\").Pet }\n */\nfunction walk(p) {\n  console.log(`Walking ${p.name}...`);\n}\n</code></pre>\n<h2 id=\"relaxing-declaration-emit-visiblity-rules\" style=\"position:relative;\"><a href=\"#relaxing-declaration-emit-visiblity-rules\" aria-label=\"relaxing declaration emit visiblity rules permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Relaxing declaration emit visiblity rules</h2>\n<p>With <code>import</code> types available, many of the visibility errors reported during declaration file generation can be handled by the compiler without the need to change the input.</p>\n<p>For instance:</p>\n<pre><code class=\"language-ts\">import { createHash } from \"crypto\";\n\nexport const hash = createHash(\"sha256\");\n//           ^^^^\n// Exported variable 'hash' has or is using name 'Hash' from external module \"crypto\" but cannot be named.\n</code></pre>\n<p>With TypeScript 2.9, no errors are reported, and now the generated file looks like:</p>\n<pre><code class=\"language-ts\">export declare const hash: import(\"crypto\").Hash;\n</code></pre>\n<h2 id=\"support-for-importmeta\" style=\"position:relative;\"><a href=\"#support-for-importmeta\" aria-label=\"support for importmeta permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Support for <code>import.meta</code></h2>\n<p>TypeScript 2.9 introduces support for <code>import.meta</code>, a new meta-property as described by the current <a href=\"https://github.com/tc39/proposal-import-meta\">TC39 proposal</a>.</p>\n<p>The type of <code>import.meta</code> is the global <code>ImportMeta</code> type which is defined in <code>lib.es5.d.ts</code>.\nThis interface is extremely limited.\nAdding well-known properties for Node or browsers requires interface merging and possibly a global augmentation depending on the context.</p>\n<h5 id=\"example-5\" style=\"position:relative;\"><a href=\"#example-5\" aria-label=\"example 5 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Example</h5>\n<p>Assuming that <code>__dirname</code> is always available on <code>import.meta</code>, the declaration would be done through reopening <code>ImportMeta</code> interface:</p>\n<pre><code class=\"language-ts\">// node.d.ts\ninterface ImportMeta {\n  __dirname: string;\n}\n</code></pre>\n<p>And usage would be:</p>\n<pre><code class=\"language-ts\">import.meta.__dirname; // Has type 'string'\n</code></pre>\n<p><code>import.meta</code> is only allowed when targeting <code>ESNext</code> modules and ECMAScript targets.</p>\n<h2 id=\"new---resolvejsonmodule\" style=\"position:relative;\"><a href=\"#new---resolvejsonmodule\" aria-label=\"new   resolvejsonmodule permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>New <code>--resolveJsonModule</code></h2>\n<p>Often in Node.js applications a <code>.json</code> is needed. With TypeScript 2.9, <code>--resolveJsonModule</code> allows for importing, extracting types from and generating <code>.json</code> files.</p>\n<h5 id=\"example-6\" style=\"position:relative;\"><a href=\"#example-6\" aria-label=\"example 6 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Example</h5>\n<pre><code class=\"language-ts\">// settings.json\n\n{\n    \"repo\": \"TypeScript\",\n    \"dry\": false,\n    \"debug\": false\n}\n</code></pre>\n<pre><code class=\"language-ts\">// a.ts\n\nimport settings from \"./settings.json\";\n\nsettings.debug === true; // OK\nsettings.dry === 2; // Error: Operator '===' cannot be applied boolean and number\n</code></pre>\n<pre><code class=\"language-json\" data-meta=\"tsconfig\">// tsconfig.json\n\n{\n  \"compilerOptions\": {\n    \"module\": \"commonjs\",\n    \"resolveJsonModule\": true,\n    \"esModuleInterop\": true\n  }\n}\n</code></pre>\n<h2 id=\"--pretty-output-by-default\" style=\"position:relative;\"><a href=\"#--pretty-output-by-default\" aria-label=\"  pretty output by default permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code>--pretty</code> output by default</h2>\n<p>Starting TypeScript 2.9 errors are displayed under <code>--pretty</code> by default if the output device is applicable for colorful text.\nTypeScript will check if the output steam has <a href=\"https://nodejs.org/api/tty.html\"><code>isTty</code></a> property set.</p>\n<p>Use <code>--pretty false</code> on the command line or set <code>\"pretty\": false</code> in your <code>tsconfig.json</code> to disable <code>--pretty</code> output.</p>\n<h2 id=\"new---declarationmap\" style=\"position:relative;\"><a href=\"#new---declarationmap\" aria-label=\"new   declarationmap permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>New <code>--declarationMap</code></h2>\n<p>Enabling <code>--declarationMap</code> alongside <code>--declaration</code> causes the compiler to emit <code>.d.ts.map</code> files alongside the output <code>.d.ts</code> files.\nLanguage Services can also now understand these map files, and uses them to map declaration-file based definition locations to their original source, when available.</p>\n<p>In other words, hitting go-to-definition on a declaration from a <code>.d.ts</code> file generated with <code>--declarationMap</code> will take you to the source file (<code>.ts</code>) location where that declaration was defined, and not to the <code>.d.ts</code>.</p>","headings":[{"value":"Support number and symbol named properties with keyof and mapped types","depth":2},{"value":"Example","depth":5},{"value":"Example","depth":5},{"value":"Recommendations","depth":4},{"value":"Generic type arguments in JSX elements","depth":2},{"value":"Example","depth":5},{"value":"Generic type arguments in generic tagged templates","depth":2},{"value":"Example","depth":5},{"value":"import types","depth":2},{"value":"Example","depth":5},{"value":"Relaxing declaration emit visiblity rules","depth":2},{"value":"Support for import.meta","depth":2},{"value":"Example","depth":5},{"value":"New --resolveJsonModule","depth":2},{"value":"Example","depth":5},{"value":"--pretty output by default","depth":2},{"value":"New --declarationMap","depth":2}],"frontmatter":{"permalink":"/docs/handbook/release-notes/typescript-2-9.html","title":"TypeScript 2.9","disable_toc":null,"handbook":null,"oneline":"TypeScript 2.9 Release Notes","preamble":null,"deprecated_by":null,"deprecation_redirects":null}},"prev":null,"next":null},"pageContext":{"id":"4-typescript-2.9","slug":"/docs/handbook/release-notes/typescript-2-9.html","repoPath":"/packages/documentation/copy/en/release-notes/TypeScript 2.9.md","lang":"en","modifiedTime":"2021-05-31T12:14:15.540Z"}},"staticQueryHashes":[]}